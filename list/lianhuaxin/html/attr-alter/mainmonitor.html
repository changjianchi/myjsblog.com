<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport" >
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="../../css/libs/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/common/top_nav.css">
    <link rel="stylesheet" href="../../css/configuration_index.css">
    <link href="../../css/attr_alter.css" type="text/css" rel="stylesheet"/>
    <!--[if IE 9]>
        <link rel="stylesheet" type="text/css" href="../../css/common/ie9.css" />
    <![endif]-->

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="../../js/libs/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="../../js/libs/bootstrap.min.js"></script>
    <script src="../../js/libs/echarts-all.min.js"></script>
    <script src="../../js/common/common.js"></script>
    <script src="../../js/configuration_index.js"></script>
    <script src="../../js/attr_alter.js"></script>
    <script src="../../js/lhg/lhgdialog.js"></script>
    <title>管理中心-配置步骤一</title>
    
</head>
<body>
<div class="wjSub-content">
    <div class="wjSub-cont-tit clearfix">
        <h3>主要监控信息</h3>
        <a class="wjList-refresh" href="#">
            <img src="../../img/attr_alter/refresh-ico.png" width="20" height="20"/>
                        <span class="refres-tooltip">
                            <span class="toll-txt">获取当前实时信息</span>
                            <span class="angle-out"></span>
                            <span class="angle-in"></span>
                        </span>
        </a>
    </div>
    <div class="wjMap-wrap">
        <div class="wjmap-row clearfix">
            <div class="col-md-4 wj-pl0">
                <div class="wjMap-box" id="totalCup"></div>
            </div>
            <div class="col-md-4 wj-pl0">
                <div class="wjMap-box" id="memorUse"></div>
            </div>
            <div class="col-md-4 wj-pl0">
                <div class="wjMap-box wjMap-txt-tit">
                    <div class="wjInst-tit">磁盘剩余大小</div>
                    <div class="wjInst-num"><span>920</span>G</div>
                    <canvas width="210" height="210" id="wjCircleDisk" class="wj-circle-rate"></canvas>
                </div>
            </div>
        </div>
        <div class="wjmap-row clearfix">
            <div class="col-md-6 wj-pl0">
                <div class="wjMap-box" id="swapUse"></div>
            </div>
            <div class="col-md-6 wj-pl0">
                <div class="wjMap-box" id="diskRate"></div>
            </div>
        </div>
    </div>

    <script>
        //绘图
        //数据

        var totalCupData=[{value: 7.94}];    // 总CUP使用率
        //内存数据
        var memorUseData=[
            {value:60, name:'已使用'},
            {value:40, name:'未使用'}
        ];
        var memorUseName=[];
        for (var i=0 ;i < memorUseData.length; i++) {
            memorUseName.push(memorUseData[i].name);
        }

        //SWAP数据
        //构造数据
        var swapUseData=[];
        var swapTime=[];
        var swapStart=+new Date(1970, 0, 1);
        var quarter=15*60*1000;
        //加前置0
        function checkTime(i){
            if (i<10)
            {i="0" + i}
            return i
        }
        for (var i=0 ;i < 6; i++) {
            var newTime=new Date(swapStart);
            swapTime.push([checkTime(newTime.getHours()),checkTime(newTime.getMinutes())].join(':'));
            swapUseData.push(Math.round(Math.random()*10));
            swapStart+=quarter;
        }


        //磁盘使用率
        var diskRateData=[{value: 10.94}];    // 总CUP使用率


        //图
        //总CUP使用率
        var totalCupChart=echarts.init(document.getElementById('totalCup'));
        var totalCupOption={

            title:{
                top:'13',
                left:'15',
                text:'总CUP使用率',
                textStyle:{
                    fontWeight:'normal',
                    fontSize:'14'
                }
            },
            series: [
                {
                    name: '总CUP使用率',
                    type: 'gauge',
                    radius:100,
                    center:['50%',155],
                    detail: {
                        formatter:'{value}%',
                        textStyle:{
                            fontSize:18
                        }
                    },
                    data: totalCupData,
                    axisLine:{
                        lineStyle:{
                            color:[[1, '#1f97f6']],
                            width:7
                        }
                    },
                    splitLine:{
                        length:17,
                        lineStyle:{
                            color:'#1f97f6',
                            width:2
                        }
                    },
                    axisTick:{
                        splitNumber:10,
                        length:13,
                        lineStyle:{
                            color:'#1f97f6'
                        }
                    },
                    axisLabel:{
                        distance:2,
                        textStyle:{
                            fontSize:9
                        }
                    },
                    pointer:{
                        show:true,
                        length:75,
                        width:4
                    }
                }
            ]
        };
        totalCupChart.setOption(totalCupOption);

        //内存使用率
        var memorUseChart=echarts.init(document.getElementById('memorUse'));
        var memorUseOption={
            title:{
                top:'13',
                left:'15',
                text:'内存使用率',
                textStyle:{
                    fontWeight:'normal',
                    fontSize:'14'
                }
            },
            color:['#00bcd5','#9a99ff'],
            series : [
                {
                    name: 'jvm内存空间率',
                    type: 'pie',
                    clockwise:false,
                    radius : '100',
                    center: ['50%', 158],
                    data:memorUseData,
                    label:{
                        normal:{
                            position:'inside',
                            formatter: '{d}'+'%'
                        }
                    },

                }
            ],
            legend: {
                orient: 'vertical',
                top: 20,
                right:33,
                itemWidth:18,
                itemHeight:10,
                data: memorUseName,
                itemGap:12,
                textStyle:{
                    fontSize:14
                },
                data:[
                    {
                        name:memorUseName[0],
                        icon:'image://../../img/attr_alter/jvm_used_ico.png',
                        textStyle:{
                            color:'#00bcd5'
                        }
                    },
                    {
                        name:memorUseName[1],
                        icon:'image://../../img/attr_alter/memory_nuse_ico.png',
                        textStyle:{
                            color:'#9a99ff'
                        }
                    }
                ]
            },
        };
        memorUseChart.setOption(memorUseOption);

        //SWAP使用率


        var swapUseChart=echarts.init(document.getElementById('swapUse'));
        var swapUseOption={
            title:{
                top:'13',
                left:'15',
                text:'SWAP使用率',
                textStyle:{
                    fontWeight:'normal',
                    fontSize:'14'
                }
            },
            tooltip: {
                trigger: 'axis',
                position: function (pt) {
                    return [pt[0], '10%'];
                }
            },
            xAxis : [
                {
                    show:true,
                    type : 'category',
                    data :swapTime ,
                    splitLine:{
                        show:true,
                        color:['#d1d1d1']
                    }
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    splitLine:{
                        show:true,
                        lineStyle:{
                            color:['#ececec']
                        }
                    },
                    min:0,
                    max:10
                }
            ],

            grid:{
                top:40,
                left:35,
                right:13,
                bottom:40
            },
            series: [
                {
                    name: 'SWAP使用率',
                    type: 'line',
                    smooth: true,
                    data:swapUseData,
                    lineStyle:{
                        normal:{
                            color:'#1796cd'
                        }
                    },
                    itemStyle:{
                        normal:{
                            opacity:0
                        }
                    }
                }
            ]
        };
        swapUseChart.setOption(swapUseOption);

        //磁盘使用率
        var diskRateChart=echarts.init(document.getElementById('diskRate'));
        var diskRateOption={

            title:{
                top:'13',
                left:'15',
                text:'磁盘使用率',
                textStyle:{
                    fontWeight:'normal',
                    fontSize:'14'
                }
            },
            series: [
                {
                    name: '磁盘使用率',
                    type: 'gauge',
                    radius:100,
                    center:['50%',155],
                    detail: {
                        formatter:'{value}%',
                        textStyle:{
                            fontSize:18
                        }
                    },
                    data: diskRateData,
                    axisLine:{
                        lineStyle:{
                            color:[[1, '#2196f3']],
                            width:7
                        }
                    },
                    splitLine:{
                        length:17,
                        lineStyle:{
                            color:'#2196f3',
                            width:2
                        }
                    },
                    axisTick:{
                        splitNumber:10,
                        length:13,
                        lineStyle:{
                            color:'#2196f3'
                        }
                    },
                    axisLabel:{
                        distance:2,
                        textStyle:{
                            fontSize:9
                        }
                    },
                    pointer:{
                        show:true,
                        length:75,
                        width:4
                    }
                }
            ]
        };
        diskRateChart.setOption(diskRateOption);

        $(window).resize(function () {
            memorUseChart.resize();
            totalCupChart.resize();
            diskRateChart.resize();
            swapUseChart.resize();
        });

        //磁盘剩余大小 传dom 及 使用百分比
        drawRing(document.getElementById('wjCircleDisk'),0.7);
        //clearRing(document.getElementById('wjCircleDisk'));   //清除原内容
    </script>
</div>

<script>
    $(window).on('load', function () {
        autoHeight();
    });
</script>
</body>
</html>
