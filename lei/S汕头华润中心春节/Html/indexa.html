<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>汕头华润中心——17转好运</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="wap-font-scale" content="no">
    <link rel="stylesheet" href="css/css.css">
</head>
<body>
<script src="js/zepto.min.js"></script>
<script>
     var winWidth = document.body.clientWidth;
     var winHeight = document.body.clientHeight;
     var Html = document.getElementsByTagName('html');
     Html[0].style.fontSize = winWidth / 6.4 + 'px';

    function play() {
        var video = $("#myVideo").get(0).play();
    }
    function stop() {
        var video = $("#myVideo").get(0).pause();
    }
    $(document).ready(function () {
        var video = $("#myVideo");
        var _video = video.get(0);
        $("#myVideo").bind("play", function () {
            drawCanvas();
        });
        function drawBlock(context, x, y, width, height, color) {
            var imageData = context.createImageData(width, height);
            var pixelArray = imageData.data,
                pixel = null;
            for (var m = 0, length = pixelArray.length; m < length; m += 4) {
                pixelArray[m] = pixelArray[m + 1] = pixelArray[m + 2] = pixelArray[m + 3] = color;
            }
            context.putImageData(imageData, x, y);
        }
        function drawCanvas() {
            if (_video.paused || _video.ended) {
                return;
            }
            var canvas = $("#canvas");
            var _canvas = canvas.get(0);
            var context = _canvas.getContext("2d");
            context.drawImage(_video, 0, 0, 100, 100);
            setTimeout(drawCanvas, 20);
        }
    });

 </script>
<!-- start -->
<div class="body">
    <div class="table-a home">
        <div class="table-cell">
            <img src="img/ind-movie.png" class="ind-movie">
            <a href="javascript:;" class="ind-but" onclick="play()"></a>
        </div>
    </div>

    <div class="video">
        <video id="myVideo" webkit-playsinline="true" preload="auto">
            <source src="video/time.mp4" type="video/mp4"></source>
        </video>
        <canvas id="canvas" style="display:none"></canvas>
    </div>
    <div class="yejiao-bottom"><img src="img/logo.png"></div>
    <div class="yejiao-top"><i>H5创意：奇象创意群</i></div>
</div>
<!-- script -->
    <script src="js/ind.js"></script>
    <script>
    $(function(){
        var videoDiv = $('.video');
        var liveVideo = videoDiv.find('video').get(0);
        var homeDiv = $('.home');
        var indBut = $('.ind-but');

        indBut.on('click',function(){
            videoDiv.addClass('active');
            homeDiv.addClass('active');
            setTimeout(function(){
                liveVideo.play();
                // document.addEventListener("WeixinJSBridgeReady", function () {//微信
                //     play();
                // }, false);
            },300);
        });

        // video
        
        liveVideo.addEventListener('ended', function () {  
            console.log('video.over');
            // setTimeout(function(){
                // videoDiv.addClass('video-over');
                // ssDiv.addClass('active');
                setTimeout(function(){
                    window.location.href = "s-s.html"
                    // ssH.addClass('active');
                },200);
            // },300);
        }, false);
    });
    </script>
    <script>
        window.onload = function(){
            pageLoading();
        }

        function pageLoading(){
            var a = document.getElementById("loading");
            a.parentNode.removeChild(a);
        }
        var loadingHtml='<div id="loading" style="position:fixed;width:100%;height:100%;left:0px;top:0px; z-index:100; display:table;"><div style="width:100%; height:100%; display:table-cell; vertical-align: middle;"><div style="background:rgba(0,0,0,0.7); width:2rem;height:2rem;border-radius: .1rem; margin:0 auto;overflow:hidden;"><img src="img/loading.gif" style="width:45%; height:auto; display:block; margin:.6rem auto .3rem;"></div></div></div>';
        document.write(loadingHtml);
    </script>
</body>
</html>