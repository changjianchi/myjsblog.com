!function e(t,n,r){function o(a,_){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!_&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return o(n?n:e)},d,d.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){t.exports=function(){var e=function(e){var t=arguments[0];if("undefined"==typeof t||null===t)return{};if("object"!=typeof t)return t;var n=arguments[1],r=!0;n instanceof Array||(n=t,r=!1);var o,i={};for(o in n)attr=r?n[o]:o,t.hasOwnProperty(attr)&&(t[attr]instanceof Array?i[attr]=cloneArray(t[attr]):"object"==typeof t[attr]?i[attr]=cloneOwn(t[attr]):i[attr]=t[attr]);return i};return{clone_obj:e}}()},{}],2:[function(e,t,n){t.exports=function(){var t=e("./ajaxTools"),n="http://g2.live.360.cn/liveplay",r="http://gtest.live.360.cn/liveplay",o="http://g2.live.360.cn/replay",i="http://gtest.live.360.cn/replay",a=0,_=function(e,s,u){var d="";d="liveplay"==s.vtype?s.debug?r:n:s.debug?i:o;var c={channel:s.channel,sn:s.sn,_rate:s._rate,stype:s.stype,sid:s.sid,ts:s.ts,_jsonp:s._jsonp};t.ajaxJsonp(d,c,function(t){if(t)u(t),e.trigger("connectSuccess");else if(e.trigger("reconnect"),3>a){a++;var n=Math.floor(0+2*Math.random());switch(n){case 0:setTimeout(function(){_(c,u)},1e3);break;case 1:setTimeout(function(){_(c,u)},3e3);break;case 2:setTimeout(function(){_(c,u)},5e3)}}else e.trigger("connectError"),u(!1)})};return{init:_}}()},{"./ajaxTools":6}],3:[function(e,t,n){!function(t){var n=e("./Connect"),r=e("./Video_event"),o=e("./Video_get_attributes"),i=e("./ajaxTools"),a=e("./Clone_obj"),_=e("./event");H5_video=function(){};var s=function(e,t){for(var n in t)e[n]=t[n]};s(H5_video.prototype,_),H5_video.prototype.init=function(e,t){var r=this;t&&(this._dom=t),e&&(this._user_data=e),this._upload_info_url="http://qos.live.360.cn/vc.gif",this._event,this._online_timer,this._sdkver="1.0.0",this._update_info_base_date,this._is_pause=0,this._stalled_num=0,this._video,this._is_waiting=0,this._waiting_start_time=0,this._waiting_end_time=0,this._waiting_num=0,this._is_seek=0,this._total_waiting_time=0,this._is_first_error=1,this._mark_time=0,this._dispatch_time=0,this._stalled_time=0,this._stalled_timer,this._back_url=[],this._update_info_base_date={cid:this._user_data.channel,uid:this._user_data.uid||"",sdkver:this._sdkver,sid:this._user_data.sid||"",bid:this._user_data.bid||"",pid:this._user_data.pid||"H5",ver:"0.0.1_device_"+i.getDevice()+"_app_"+i.getApp(),rid:this._user_data.sn,mid:this._user_data.mid||"",tm:(new Date).getTime(),r:Math.random(),ty:"online"};var o={channel:this._user_data.channel,sdkver:this._sdkver,sn:this._user_data.sn,_rate:this._user_data._rate||"xd",stype:this._user_data.stype||"m3u8",vtype:this._user_data.vtype||"",debug:this._user_data.debug||!1,sid:this._user_data.sid||"",ts:(new Date).getTime(),_jsonp:this._user_data._jsonp||"_jsonp"},a=(new Date).getTime();n.init(this,o,function(e){if(e){r._back_url=e.back,r._update_info_base_date.u=encodeURI(e.main);var t=r._user_data.width||"100%",n=r._user_data.height||"100%",o=r._user_data.controls?" controls":"",_=r._user_data.autoplay?" autoplay":"",s=r._user_data.loop?'loop="loop"':"",u=r._user_data.preload?r._user_data.preload:"auto",d=r._user_data.poster||"",c="<video "+o+_+' webkit-playsinline="true" x-webkit-airplay="true" width="'+t+'" height="'+n+'" '+s+' preload="'+u+'" poster="'+d+'" src="'+e.main+'" ></video>';r._dom.innerHTML=c,r._video=r._dom.querySelector("video"),r._video.duration=0,r.add_dispatch_event(),"replay"==r._user_data.vtype&&("pc"==i.getDevice()||i.isAndroidLower())&&i.loadScript("http://s8.qhimg.com/!3736dda8/hls.min.js",function(){if(Hls.isSupported()){var t=new Hls;t.loadSource(e.main),t.attachMedia(r._video),t.on(Hls.Events.MANIFEST_PARSED,function(){r._video.play()})}});var l=(new Date).getTime(),v=l-a;r._dispatch_time=v,r.upload_info_action(0,v),r.upload_info_init(),r._online_timer=setInterval(function(){r.upload_info_online(r._upload_info_url,r._update_info_base_date)},6e4)}else{alert("cdn 返回链接失败");var l=(new Date).getTime(),v=l-a;r.upload_info_action(r.dom.error.code,v)}r._is_first_error=0})},H5_video.prototype.use_back_url=function(){var e=this;e._stalled_time=0,clearInterval(e._stalled_timer),e._video.src=e._dom.querySelector("video").src,e._video.play(),e.trigger("reload current url")},H5_video.prototype.check_video=function(){var e=document.createElement("video");return e.canPlayType?!0:!1},H5_video.prototype.request_full_screen=function(){var e=this;e._video.requestFullScreen?(e._video.requestFullScreen(),e.trigger("requestFullScreen")):e._video.mozRequestFullScreen?(e._video.mozRequestFullScreen(),e.trigger("requestFullScreen")):e._video.webkitRequestFullScreen&&(e._video.webkitRequestFullScreen(),e.trigger("requestFullScreen"))},H5_video.prototype.cancel_full_screen=function(){var e=this;e._video.exitFullscreen?(e._video.exitFullscreen(),e.trigger("cancelFullScreen")):e._video.mozCancelFullScreen?(e._video.mozCancelFullScreen(),e.trigger("cancelFullScreen")):e._video.webkitCancelFullScreen&&(e._video.webkitCancelFullScreen(),e.trigger("cancelFullScreen"))},H5_video.prototype.add_dispatch_event=function(){var e=this;e._event=new r.init(e),e._event.add_event()},H5_video.prototype.remove_dispatch_event=function(){var e=this;e._event.remove_event(),e._event=null},H5_video.prototype.canPlayType=function(e){return this._video.canPlayType(e)},H5_video.prototype.pause=function(){this._video.pause()},H5_video.prototype.play=function(){this._video.play()},H5_video.prototype.remove=function(){this.remove_dispatch_event(),this._video.play()},H5_video.prototype.seek=function(e){this._video.currentTime=e},H5_video.prototype.load=function(){this._video.load()},H5_video.prototype.add_current_time=function(e){this._video.currentTime+=e},H5_video.prototype.reduce_current_time=function(e){this._video.currentTime+=e},H5_video.prototype.add_playback_rate=function(e){this._video.playbackRate+=e},H5_video.prototype.reduce_playback_rate=function(e){this._video.playbackRate-=e},H5_video.prototype.add_volume=function(){this._video.volume+=.1},H5_video.prototype.reduce_volume=function(){this._video.volume-=.1},H5_video.prototype.muted=function(e){this._video.muted=e},H5_video.prototype.change_sn=function(e){this._user_data.sn=e,this.remove_dispatch_event(),clearInterval(this._online_timer),this._is_first_error=1,this.init()},H5_video.prototype.get_attributes=function(){var e=arguments[0],t=arguments[1]||0;switch(e){case"current_time":return o.currentTime(this._video);case"duration":return o.duration(this._video);case"paused":return o.paused(this._video);case"default_playback_rate":return o.defaultPlaybackRate(this._video);case"playback_rate":return o.playbackRate(this._video);case"played_start":return o.played_start(this._video,t);case"played_end":return o.played_end(this._video,t);case"seekable_start":return o.seekable_start(this._video,t);case"seekable_end":return o.seekable_end(this._video,t);case"ended":return o.ended(this._video);case"auto_play":return o.autoPlay(this._video);case"loop":return o.loop(this._video);case"buffered_start":return o.buffered_start(this._video,t);case"buffered_end":return o.buffered_end(this._video,t);case"audioTracks_length":return o.audioTracks_length(this._video);case"audioTracks_get_object_by_id":return o.audioTracks_get_object_by_id(this._video,t);case"audioTracks_get_object_by_index":return o.audioTracks_get_object_by_index(this._video,t);case"controller":return o.controller(this._video);case"current_src":return o.currentSrc(this._video);case"default_muted":return o.defaultMuted(this._video);case"error":return o.error(this._video);case"media_group":return o.mediaGroup(this._video);case"muted":return o.muted(this._video);case"network_state":return o.networkState(this._video);case"ready_state":return o.readyState(this._video);case"volume":return o.volume(this._video);case"textTracks_length":return o.textTracks_length(this._video);case"textTracks_get_object_by_index":return o.textTracks_get_object_by_index(this._video,t);case"textTracks_get_object_by_id":return o.textTracks_get_object_by_id(this._video,t);case"videoTracks_get_object_by_index":return o.videoTracks_get_object_by_index(this._video,t);case"videoTracks_get_object_by_id":return o.videoTracks_get_object_by_id(this._video,t)}},H5_video.prototype.upload_info_init=function(){var e=this;i.ajaxGet(e._upload_info_url,e._update_info_base_date,function(e){e?console.log("调度接口请求成功"):console.log("请求调度接口请求失败")})},H5_video.prototype.upload_info_action=function(e,t){var n=this,r=a.clone_obj(n._update_info_base_date);switch(r.st=2,r.rt=t,r.ty="action",r.er=e,r.tm=(new Date).getTime(),r.r=Math.random(),e){case 0:r.em="调度成功";break;case 1:r.em="用户终止";break;case 2:r.em="网络错误";break;case 3:r.em="解码错误";break;case 4:r.em="URL无效"}i.ajaxGet(n._upload_info_url,r,function(e){e?console.log("调度接口上报成功"):console.log("调度接口上报失败")})},H5_video.prototype.upload_info_online=function(e,t){var n=a.clone_obj(t);n.ty="online",n.tm=(new Date).getTime(),n.r=Math.random(),i.ajaxGet(e,n,function(e){e?console.log("在线接口上报成功"):console.log("在线接口上报失败")})},H5_video.prototype.upload_info_exception=function(e){var t=this,n=a.clone_obj(t._update_info_base_date);switch(n.exception=e,n.st=2,n.ty="action",n.tm=(new Date).getTime(),n.r=Math.random(),n.er=e,e){case 1:n.em="第一次加载时用户终止";break;case 2:n.em="第一次加载时网络错误";break;case 3:n.em="第一次加载时解码错误";break;case 4:n.em="第一次加载时URL无效";break;case 5:n.em="播放过程中用户终止";break;case 6:n.em="播放过程中网络错误";break;case 7:n.em="播放过程中解码错误";break;case 8:n.em="播放过程中URL无效";break;case 9:n.em="播放过程中stalled"}i.ajaxGet(t._upload_info_url,n,function(e){e?console.log("播放过程中的错误接口上报成功"):console.log("播放过程中的错误接口上报失败")})},H5_video.prototype.upload_info_buffer=function(e,t){var n=this,r=a.clone_obj(n._update_info_base_date);switch(r.br=e,r.ty="buffer",r.bc=n._waiting_num,r.po=n._video.currentTime,1==n._waiting_num?r.bt=t+n._dispatch_time:r.bt=t,r.tm=(new Date).getTime(),r.r=Math.random(),e){case 1:r.em="第一次加载引起的缓冲结束";break;case 2:r.em="因为seek引起得缓冲开始";break;case 4:r.em="因为播放过程中卡引起的缓冲开始"}i.ajaxGet(n._upload_info_url,r,function(e){e?console.log("缓冲原因和时间接口上报成功"):console.log("缓冲原因和时间接口上报失败")})},H5_video.prototype.upload_info_summary=function(e,t){var n=this,r=a.clone_obj(n._update_info_base_date);r.ot=e,r.bc=n._waiting_num,r.pt=t,r.ty="summary",r.tm=(new Date).getTime(),r.r=Math.random(),i.ajaxGet(n._upload_info_url,r,function(e){e?console.log("加上缓冲一共花去的观看影片的时间接口上报成功"):console.log("加上缓冲一共花去的观看影片的时间接口上报失败")})}}(window)},{"./Clone_obj":1,"./Connect":2,"./Video_event":4,"./Video_get_attributes":5,"./ajaxTools":6,"./event":7}],4:[function(e,t,n){t.exports=function(){var e=function(e){function t(){w._obj.trigger("loadstart"),w._obj._is_waiting=1,w._obj._waiting_start_time=(new Date).getTime()}function n(){clearInterval(w._obj._stalled_timer),w._obj._stalled_time=0,w._obj.trigger("progress")}function r(){w._obj.trigger("suspend")}function o(){w._obj.trigger("abort")}function i(e){if(w._obj.trigger("error"),w._obj._is_first_error){var t=0;switch(w._dom.error.code){case 1:t=5;break;case 2:t=6;break;case 3:t=7;break;case 4:t=8}w._obj.upload_info_exception(t)}else w._obj.upload_info_exception(w._dom.error.code);w._obj._mark_time=w._dom.currentTime,(2==w._dom.error.code||3==w._dom.error.code)&&w._obj.use_back_url()}function a(){clearInterval(w._obj._stalled_timer),w._obj._stalled_time=0,w._obj.trigger("stalled"),w._obj._mark_time=w._dom.currentTime,w._obj.upload_info_exception(9)}function _(){if(w._obj._stalled_time++,w._obj._stalled_time>=9){var e=w._obj._dom.querySelector("video").getAttribute("src");w._obj._dom.querySelector("video").setAttribute("src",e),w._obj._stalled_time=0}}function s(){w._obj.trigger("play")}function u(){w._obj._is_pause=1,w._obj.trigger("pause")}function d(){w._obj.trigger("loadedmetadata")}function c(){w._obj.trigger("loadeddata")}function l(){clearInterval(w._obj._stalled_timer),w._obj._stalled_time=0,w._obj.trigger("waiting"),w._obj._waiting_num++,w._obj._waiting_start_time=(new Date).getTime(),w._obj._stalled_timer=setInterval(_,1e3)}function v(){clearInterval(w._obj._stalled_timer),w._obj._stalled_time=0,w._obj.trigger("playing"),w._obj._waiting_end_time=(new Date).getTime();var e=w._obj._waiting_end_time-w._obj._waiting_start_time;w._obj._total_waiting_time=w._obj._total_waiting_time+e,w._obj._is_pause?w._obj._is_pause=0:w._obj._is_seek?0!=w._obj._waiting_start_time&&w._obj.upload_info_buffer(2,e):0==w._obj._waiting_num?(w._obj._waiting_num++,w._obj.upload_info_buffer(1,e)):0!=w._obj._waiting_start_time&&w._obj.upload_info_buffer(4,e),w._obj._waiting_start_time=0,w._obj._waiting_end_time=0,w._obj._is_seek=0}function f(){w._obj.trigger("canplay"),w._obj._mark_time&&(w._dom.currentTime=w._obj._mark_time,w._obj._mark_time=0)}function p(){w._obj.trigger("canplaythrough")}function m(){w._obj._is_seek=1,w._obj.trigger("seeking")}function h(){w._obj.trigger("seeked")}function b(){w._obj.trigger("timeupdate")}function g(){w._obj.upload_info_summary(w._obj._total_waiting_time+w._obj._video.currentTime,w._obj._video.currentTime),w._obj._total_waiting_time=0,w._obj._waiting_num=0,clearInterval(w._obj._online_timer),w._obj._is_first_error=1,w._obj._mark_time=0,w._obj.trigger("ended")}function y(){w._obj.trigger("ratechange")}function j(){w._obj.trigger("durationchange")}function k(){w._obj.trigger("volumechange")}var w=this;w._obj=e,w._dom=e._video,w.add_event=function(){w._dom.addEventListener("loadstart",t,!1),w._dom.addEventListener("progress",n,!1),w._dom.addEventListener("suspend",r,!1),w._dom.addEventListener("abort",o,!1),w._dom.addEventListener("error",i,!1),w._dom.addEventListener("stalled",a,!1),w._dom.addEventListener("play",s,!1),w._dom.addEventListener("pause",u,!1),w._dom.addEventListener("loadedmetadata",d,!1),w._dom.addEventListener("loadeddata",c,!1),w._dom.addEventListener("waiting",l,!1),w._dom.addEventListener("playing",v,!1),w._dom.addEventListener("canplay",f,!1),w._dom.addEventListener("canplaythrough",p,!1),w._dom.addEventListener("seeking",m,!1),w._dom.addEventListener("seeked",h,!1),w._dom.addEventListener("timeupdate",b,!1),w._dom.addEventListener("ended",g,!1),w._dom.addEventListener("ratechange",y,!1),w._dom.addEventListener("durationchange",j,!1),w._dom.addEventListener("volumechange",k,!1)},w.remove_event=function(){w._dom.removeEventListener("loadstart",t,!1),w._dom.removeEventListener("progress",n,!1),w._dom.removeEventListener("suspend",r,!1),w._dom.removeEventListener("abort",o,!1),w._dom.removeEventListener("error",i,!1),w._dom.removeEventListener("stalled",a,!1),w._dom.removeEventListener("play",s,!1),w._dom.removeEventListener("pause",u,!1),w._dom.removeEventListener("loadedmetadata",d,!1),w._dom.removeEventListener("loadeddata",c,!1),w._dom.removeEventListener("waiting",l,!1),w._dom.removeEventListener("playing",v,!1),w._dom.removeEventListener("canplay",f,!1),w._dom.removeEventListener("canplaythrough",p,!1),w._dom.removeEventListener("seeking",m,!1),w._dom.removeEventListener("seeked",h,!1),w._dom.removeEventListener("timeupdate",b,!1),w._dom.removeEventListener("ended",g,!1),w._dom.removeEventListener("ratechange",y,!1),w._dom.removeEventListener("durationchange",j,!1),w._dom.removeEventListener("volumechange",k,!1)}};return{init:e}}()},{}],5:[function(e,t,n){t.exports=function(){var e=0,t=0,n=function(n){return 2>e?e++:2==e&&(e++,n.currentTime>1e3&&(t=n.currentTime)),t?_currentTime=n.currentTime-t:_currentTime=n.currentTime,_currentTime},r=function(e){return e.duration},o=function(e){return e.paused},i=function(e){return e.defaultPlaybackRate},a=function(e){return e.playbackRate},_=function(e,t){return e.played.start(t)},s=function(e,t){return e.played.end(t)},u=function(e,t){return e.seekable.start(t)},d=function(e,t){return e.seekable.end(t)},c=function(e){return e.ended},l=function(e){return e.autoplay},v=function(e){return e.loop},f=function(e,t){return e.buffered.start(t)},p=function(e,t){return e.buffered.end(t)},m=function(e){return e.audioTracks.length},h=function(e,t){return e.audioTracks.getTrackById(t)},b=function(e,t){return e.audioTracks[t]},g=function(e){return e.controller},y=function(e){return e.currentSrc},j=function(e){return e.defaultMuted},k=function(e){return e.error},w=function(e){return e.mediaGroup},T=function(e){return e.muted},x=function(e){return e.volume},L=function(e){return e.networkState},E=function(e){return e.readyState},S=function(e){return e.textTracks.length},H=function(e,t){return e.textTracks[t]},R=function(e,t){return e.textTracks.getTrackById(t)},q=function(e,t){return e.videoTracks[t]},D=function(e,t){return e.videoTracks.getTrackById(t)};return{currentTime:function(e){return n(e)},duration:function(e){return r(e)},paused:function(e){return o(e)},defaultPlaybackRate:function(e){return i(e)},playbackRate:function(e){return a(e)},played_start:function(e,t){return _(e,t)},played_end:function(e,t){return s(e,t)},seekable_start:function(e,t){return u(e,t)},seekable_end:function(e,t){return d(e,t)},ended:function(e){return c(e)},autoPlay:function(e){return l(e)},loop:function(e){return v(e)},buffered_start:function(e,t){return f(e,t)},buffered_end:function(e,t){return p(e,t)},audioTracks_length:function(e){return m(e)},audioTracks_get_object_by_id:function(e,t){return h(e,t)},audioTracks_get_object_by_index:function(e,t){return b(e,t)},controller:function(e){return g(e)},currentSrc:function(e){return y(e)},defaultMuted:function(e){return j(e)},error:function(e){return k(e)},mediaGroup:function(e){return w(e)},muted:function(e){return T(e)},networkState:function(e){return L(e)},readyState:function(e){return E(e)},volume:function(e){return x(e)},textTracks_length:function(e){return S(e)},textTracks_get_object_by_index:function(e,t){return H(e,t)},textTracks_get_object_by_id:function(e,t){return R(e,t)},videoTracks_get_object_by_id:function(e,t){return D(e,t)},videoTracks_get_object_by_index:function(e,t){return q(e,t)}}}()},{}],6:[function(e,t,n){t.exports=function(){var e=function(){var e=+new Date+"_",t=0;return function(){return e+ ++t}}(),t=function(t,n,r){var o="Huajiao_player_jsonp"+e();window[o]=function(e){r(e);try{delete window[o]}catch(t){}},n.callback="window."+o,n._jsonp=n.callback;var i=document.createElement("script"),a=document.getElementsByTagName("head")[0];i.onreadystatechange=i.onload=function(){(!i.readyState||/loaded|complete/i.test(i.readyState))&&(i.onreadystatechange=i.onload=null,i.parentNode.removeChild(i))},i.onerror=function(){i.onerror=null,i.parentNode.removeChild(i),r(!1)},i.type="text/javascript",a.appendChild(i);var _="?";for(var s in n){var u=_.indexOf("&");_=-1==u?_+s+"="+encodeURIComponent(n[s])+"&":_+s+"="+encodeURIComponent(n[s])+"&"}_=_+"callbackfn="+o+"&",_=_+"_="+(new Date).getTime(),i.src=t+_},n=function(e,t,n){var r;window.ActiveXObject?r=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(r=new XMLHttpRequest);var o="?";for(var i in t){var a=o.indexOf("&");o=-1==a?o+i+"="+encodeURIComponent(t[i])+"&":o+i+"="+encodeURIComponent(t[i])+"&"}o=o+"_="+(new Date).getTime(),r.withCredentials=!0,r.open("get",e+o,!0),r.send(null),r.onreadystatechange=function(e){4==r.readyState&&200==r.status&&n(e?e:!1)}},r=function(){var e=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)?"ios":/android/.test(e)?"android":/version/.test(e)&&/safari/.test(e)&&!/iphone|ipad|ipod/.test(e)?"pcsafari":"pc"},o=function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)?"weixin":"weibo"==e.match(/weibo/i)?"weibo":"other"},i=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.body.appendChild(n)},a=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("android")>-1?e.substr(e.indexOf("android")+8,1)<4?!0:void 0:!1};return{ajaxJsonp:t,ajaxGet:n,getDevice:r,getApp:o,loadScript:i,isAndroidLower:a}}()},{}],7:[function(e,t,n){t.exports=function(){var e=Array.prototype.slice,t=function(){var e="__event",t=0;return function(){return e+t++}}(),n={on:function(e,t,n){if(!o(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!o(this,"once",e,[t,n])||!t)return this;var r=this,i=_.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){if(!this._events||!o(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(var r=e?[e]:_.keys(this._events),i=0,a=r.length;a>i;i++){e=r[i];var s=this._events[e];if(s)if(t||n){for(var u=[],d=0,c=s.length;c>d;d++){var l=s[d];(t&&t!==l.callback&&t!==l.callback._callback||n&&n!==l.context)&&u.push(l)}u.length?this._events[e]=u:delete this._events[e]}else delete this._events[e]}return this},trigger:function(t){if(!this._events)return this;var n=e.call(arguments,1);if(!o(this,"trigger",t,n))return this;var r=this._events[t],a=this._events.all;return r&&i(r,n),a&&i(a,arguments),this},listenTo:function(e,n,r){var o=this._listeningTo||(this._listeningTo={}),i=e._listenId||(e._listenId=t("l"));return o[i]=e,r||"object"!=typeof n||(r=this),e.on(n,r,this),this},listenToOnce:function(e,t,n){if("object"==typeof t){for(var r in t)this.listenToOnce(e,r,t[r]);return this}var o=_.once(function(){this.stopListening(e,t,o),n.apply(this,arguments)});return o._callback=n,this.listenTo(e,t,o)},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var o=!t&&!n;n||"object"!=typeof t||(n=this),e&&((r={})[e._listenId]=e);for(var i in r)e=r[i],e.off(t,n,this),(o||_.isEmpty(e._events))&&delete this._listeningTo[i];return this}},r=/\s+/,o=function(e,t,n,o){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(o));return!1}if(r.test(n)){for(var a=n.split(r),_=0,s=a.length;s>_;_++)e[t].apply(e,[a[_]].concat(o));return!1}return!0},i=function(e,t){var n,r=-1,o=e.length,i=t[0],a=t[1],_=t[2];switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i);return;case 2:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i,a);return;case 3:for(;++r<o;)(n=e[r]).callback.call(n.ctx,i,a,_);return;default:for(;++r<o;)(n=e[r]).callback.apply(n.ctx,t);return}};return n.bind=n.on,n.unbind=n.off,n}()},{}]},{},[3]);